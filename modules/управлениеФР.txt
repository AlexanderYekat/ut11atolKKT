//ВстариваниеВКонфуУТ11 2024
&НаКлиенте
процедура ЗавершениеПечатиZXОтчетаРеальное(РезультатПечатиZОтчетаНаККТ, ДопПараметры) экспорт
	Перем ОписаниеОшибки;
	//ДопПараметры - пустые, не понятно какая информация может нам понадоится
	//Сообщить("ЗавершениеZОтчета с реузльатом" + СокрЛП(РезультатПечатиZОтчетаНаККТ));
	Если Не РезультатПечатиZОтчетаНаККТ.Результат 
		И Не ДопПараметры.ИспользоватьБезПодключенияОборудования 
		Тогда		
		ТекстСообщения = НСтр("ru = 'При снятии отчета на фискальном регистраторе произошла ошибка.
			|%ОписаниеОшибки%
			|Отчет на фискальном регистраторе не сформирован.'");
			ТекстСообщения = СтрЗаменить(ТекстСообщения, "%ОписаниеОшибки%", РезультатПечатиZОтчетаНаККТ.ОписаниеОшибки);
		ОбщегоНазначенияКлиентСервер.СообщитьПользователю(ТекстСообщения);		
	КонецЕсли;			
конецПроцедуры //ЗавершениеПечатиЧека

&НаКлиенте
Процедура ПечатьОтчетаЗавершение(ИдентификаторУстройства, Параметры) Экспорт
	
	Если НЕ Параметры.Свойство("Действие") Тогда
		Возврат;
	КонецЕсли;
	ОписаниеОшибки = "";	
	//Сообщить("Вставка кода для печти z,x-отчета");
	//ВстариваниеВКонфуУТ11 2024
	//формаДокумента = ОткрытьФормуДокументаИзКоторогоБудетПечататьсяЧек();
	//скорее всего здесь надо вставить ссылку на процедуру обработки результата пеачти чека в модуле документа
	//КоманндаДляККТ = "XОтчет";
	//Если Параметры.Действие = "PrintZReport" тогда
	//	КоманндаДляККТ = "ZОтчет";
	//конецЕсли;	
	ТекущиеДопПарметрыКоторыеПонадобятсяДалее = Новый Структура;
	ТекущиеДопПарметрыКоторыеПонадобятсяДалее.Вставить("КоманндаДляККТ", Параметры.Действие);
	//ТекущиеДопПарметрыКоторыеПонадобятсяДалее.Вставить("ИдентификаторУстройства", ИдентификаторУстройства);
   	//ОповещениеПриЗавершенииПечатиЧека = Новый ОписаниеОповещения("ЗавершениеПечатиZОтчетаРеальное", ЭтотОбъект, ТекущиеДопПарметрыКоторыеПонадобятсяДалее);
	ОповещениеПриЗавершенииПечатиЧека = Новый ОписаниеОповещения("ЗавершениеПечатиZXОтчетаРеальное", ЭтотОбъект);
	Если ПодключаемоеОборудованиеУниверсальныйДрайверКлиент.ПечатьВызватьКомандуНаККТВместоВстроеннойВКонфигурацию(
			Параметры.Действие, ОповещениеПриЗавершенииПечатиЧека, ЭтаФорма)
	тогда
		//Сообщить("Вставка кода для печти --");
		Возврат; //
	конецЕсли;
	//ВстариваниеВКонфуУТ11 2024 --	
